----------------------------------------------------------------------
-- Copyright (c) 2019, ETH Zurich.
-- All rights reserved.
--
-- This file is distributed under the terms in the attached LICENSE file.
-- If you do not find this file, copies can be found by writing to:
-- ETH Zurich D-INFK, Universitaetsstrasse 6, CH-8092 Zurich.
-- Attn: Systems Group.
--
-- Hakefile for /tools/sockeye/tests
--
----------------------------------------------------------------------
let 
    tests = (map takeBaseName (find withSuffix ".soc"))
    test_rules = map sockeye2PlTest tests
    echo t = [ Str "@echo \"=====================\"", NL
             , Str $ "@echo \"Resulf of test " ++ t ++ "\":", NL
             , Str "@cat", In BuildTree "" (sockeye2PlTestResultLoc t), NL]
    echo_rule = Phony "test-sockeye" False (concat $ map echo tests)
in
    test_rules ++ [echo_rule]
    
    
